<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Süt Tankı İzleme Sistemi</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f7f6; text-align: center; padding: 15px; margin: 0; }
        .konteyner { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .kart-grubu { display: flex; justify-content: space-around; gap: 10px; margin-bottom: 20px; }
        .kart { background: #fff; border: 1px solid #eee; border-radius: 12px; padding: 15px; flex: 1; }
        .etiket { font-size: 11px; color: #7f8c8d; text-transform: uppercase; }
        .deger { font-size: 18px; font-weight: bold; margin-top: 5px; }
        .sicaklik { color: #e74c3c; }
        canvas { margin-top: 20px; max-height: 250px; }
    </style>

    <script>
        // Sayfayı 2.5 saniyede bir yeniler
        setInterval(function(){ location.reload(); }, 2500);
    </script>
</head>
<body>
    <div class="konteyner">
        <h3>Süt Soğutma Analiz Paneli</h3>
        
        <div class="kart-grubu">
            <div class="kart">
                <div class="etiket">Sıcaklık</div>
                <div class="deger sicaklik">{{ data.sicaklik }} °C</div>
            </div>
            <div class="kart">
                <div class="etiket">Akım</div>
                <div class="deger">{{ data.akim }} A</div>
            </div>
            <div class="kart">
                <div class="etiket">Doluluk</div>
                <div class="deger" style="color:#3498db">{{ data.doluluk }} L</div>
            </div>
        </div>

        <canvas id="sicaklikGrafik"></canvas>
    </div>

    <script>
        // Bu kısım Flask'tan gelen geçmiş verileri grafiğe döker
        const ctx = document.getElementById('sicaklikGrafik').getContext('2d');
        const sicaklikGrafik = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['10', '9', '8', '7', '6', '5', '4', '3', '2', 'Şimdi'],
                datasets: [{
                    label: 'Sıcaklık Geçmişi (°C)',
                    data: [12, 11.5, 11, 10.2, 9.8, 9.2, 8.5, 8.1, 7.8, {{ data.sicaklik }}],
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                scales: { y: { beginAtZero: false } }
            }
        });
    </script>
</body>
</html>

